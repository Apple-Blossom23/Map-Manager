spring:
  application:
    name: map-workshop-backend
  
  # 数据库配置 - 从环境变量读取
  datasource:
    url: ${DB_URL:jdbc:postgresql://localhost:5432/workshop_db}
    username: ${DB_USERNAME:workshop}
    password: ${DB_PASSWORD}
    driver-class-name: ${DB_DRIVER:org.postgresql.Driver}
    hikari:
      maximum-pool-size: ${DB_POOL_SIZE:10}
      minimum-idle: ${DB_MIN_IDLE:5}
      connection-timeout: ${DB_TIMEOUT:30000}
  
  # JPA配置
  jpa:
    database-platform: ${HIBERNATE_DIALECT:org.hibernate.dialect.PostgreSQLDialect}
    hibernate:
      ddl-auto: ${HIBERNATE_DDL_AUTO:update}
    show-sql: ${SHOW_SQL:false}
    properties:
      hibernate:
        format_sql: ${FORMAT_SQL:false}
        use_sql_comments: ${USE_SQL_COMMENTS:false}
  
  # 文件上传配置
  servlet:
    multipart:
      max-file-size: ${MAX_FILE_SIZE:50MB}
      max-request-size: ${MAX_REQUEST_SIZE:50MB}
  
  # 邮件配置（可选）
  mail:
    default-encoding: UTF-8
    host: ${MAIL_HOST:}
    port: ${MAIL_PORT:587}
    username: ${MAIL_USERNAME:}
    password: ${MAIL_PASSWORD:}
    properties:
      mail:
        smtp:
          auth: ${MAIL_SMTP_AUTH:true}
          starttls:
            enable: ${MAIL_SMTP_STARTTLS:true}

server:
  port: ${SERVER_PORT:8080}
  servlet:
    context-path: ${CONTEXT_PATH:/api}

# JWT配置
jwt:
  secret: ${JWT_SECRET:default-secret-key-change-this-in-production-at-least-256-bits}
  expiration: ${JWT_EXPIRATION:86400000}

# 上传配置
upload:
  path: ${UPLOAD_PATH:./uploads}
  max-size: ${MAX_UPLOAD_SIZE:52428800}

# 日志配置
logging:
  level:
    com.workshop: ${LOG_LEVEL:INFO}
    org.springframework.security: ${SECURITY_LOG_LEVEL:INFO}
    org.hibernate.SQL: ${HIBERNATE_LOG_LEVEL:WARN}